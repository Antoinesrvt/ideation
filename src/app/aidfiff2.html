<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kickoff - Enhanced AI Change Management</title>
  <style>
    :root {
      /* Core Colors */
      --primary: hsl(273, 91%, 42%);
      --primary-glow: hsla(273, 91%, 42%, 0.3);
      --primary-light: hsl(273, 91%, 60%);
      --primary-dark: hsl(273, 91%, 32%);
      --secondary: hsl(198, 86%, 61%);
      --accent: hsl(339, 94%, 58%);
      --insight: hsl(140, 86%, 61%);
      --dark: hsl(240, 19%, 14%);
      --light: hsl(240, 60%, 99%);
      
      /* Status Colors */
      --status-added: hsl(142, 76%, 47%);
      --status-added-bg: hsla(142, 76%, 47%, 0.1);
      --status-modified: hsl(217, 91%, 60%);
      --status-modified-bg: hsla(217, 91%, 60%, 0.1);
      --status-removed: hsl(355, 90%, 61%);
      --status-removed-bg: hsla(355, 90%, 61%, 0.1);
      --status-unchanged: hsl(220, 9%, 46%);
      --status-unchanged-bg: hsla(220, 9%, 46%, 0.1);
      
      /* Semantic Colors */
      --bg-primary: hsl(240, 50%, 99%);
      --bg-surface: hsl(0, 0%, 100%);
      --text-primary: hsl(240, 20%, 10%);
      --text-secondary: hsl(240, 10%, 40%);
      
      /* Animation Timings */
      --transition-fast: 0.2s cubic-bezier(0.16, 1, 0.3, 1);
      --transition-medium: 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      --transition-slow: 0.8s cubic-bezier(0.16, 1, 0.3, 1);
      --easing-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
      
      /* Depth and Elevation */
      --depth-surface: 0 2px 10px rgba(0, 0, 0, 0.05);
      --depth-floating: 0 8px 20px rgba(0, 0, 0, 0.1);
      --depth-popup: 0 15px 40px rgba(0, 0, 0, 0.15);
      --depth-modal: 0 25px 50px rgba(0, 0, 0, 0.25);
      
      /* Glassmorphism */
      --glass-background: rgba(255, 255, 255, 0.7);
      --glass-blur: blur(10px);
      --glass-border: 1px solid rgba(255, 255, 255, 0.2);
      
      /* Spotlight Effect */
      --spotlight-radius: 150px;
      --spotlight-opacity: 0.2;
    }
    
    @font-face {
      font-family: 'Outfit';
      src: url('https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.2/fonts/bootstrap-icons.woff2') format('woff2');
      font-weight: 600;
      font-style: normal;
      font-display: swap;
    }
    
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background-color: var(--bg-primary);
      color: var(--text-primary);
      font-size: 16px;
      line-height: 1.5;
      min-height: 100vh;
      overflow-x: hidden;
      display: flex;
      flex-direction: column;
    }
    
    h1, h2, h3, h4, h5, h6 {
      font-family: 'Outfit', -apple-system, BlinkMacSystemFont, sans-serif;
      font-weight: 600;
    }
    
    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }
    
    .header {
      text-align: center;
      margin-bottom: 2rem;
    }
    
    .title {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    
    .subtitle {
      color: var(--text-secondary);
      font-size: 1.2rem;
      max-width: 700px;
      margin: 0 auto;
    }
    
    /* Enhanced Workspace Environment */
    .ai-workspace {
      position: relative;
      width: 100%;
      background: var(--bg-surface);
      border-radius: 24px;
      padding: 3rem 2rem;
      box-shadow: var(--depth-surface);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2rem;
      transition: background var(--transition-slow);
    }
    
    .workspace-container {
      position: relative;
      width: 100%;
      max-width: 1000px;
      height: 700px;
      background: linear-gradient(to bottom right, #f8f9ff, #eef1ff);
      border-radius: 16px;
      border: 1px solid rgba(0, 0, 0, 0.05);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      transition: all var(--transition-medium);
      z-index: 1;
    }
    
    .workspace-container.sandbox-mode {
      box-shadow: 0 0 0 2px var(--primary-light), var(--depth-floating);
    }
    
    .workspace-container.sandbox-mode::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(45deg, 
        rgba(114, 9, 183, 0.02) 25%, 
        rgba(114, 9, 183, 0.04) 25%, 
        rgba(114, 9, 183, 0.04) 50%, 
        rgba(114, 9, 183, 0.02) 50%, 
        rgba(114, 9, 183, 0.02) 75%, 
        rgba(114, 9, 183, 0.04) 75%, 
        rgba(114, 9, 183, 0.04) 100%);
      background-size: 20px 20px;
      opacity: 0.3;
      z-index: -1;
      pointer-events: none;
    }
    
    .workspace-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 1.5rem;
      background: white;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      z-index: 10;
      position: relative;
    }
    
    .workspace-header.sandbox-mode {
      background: rgba(114, 9, 183, 0.05);
    }
    
    .workspace-header.sandbox-mode::before {
      content: "Sandbox Mode";
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      color: var(--primary);
      font-weight: 600;
      opacity: 0.2;
      font-size: 2rem;
      pointer-events: none;
    }
    
    .workspace-title {
      font-weight: 600;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .workspace-title-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 26px;
      height: 26px;
      border-radius: 8px;
      background: var(--primary);
      color: white;
      font-size: 0.9rem;
    }
    
    .workspace-controls {
      display: flex;
      gap: 0.8rem;
    }
    
    .workspace-control {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      background: rgba(0, 0, 0, 0.05);
      color: var(--text-primary);
      cursor: pointer;
      transition: all var(--transition-fast);
      font-size: 0.9rem;
      font-weight: 500;
    }
    
    .workspace-control:hover {
      background: rgba(0, 0, 0, 0.1);
      transform: translateY(-2px);
    }
    
    .workspace-control.active {
      background: var(--primary);
      color: white;
    }
    
    .sandbox-indicator {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: var(--primary-glow);
      color: var(--primary-dark);
      border-radius: 8px;
      font-weight: 500;
      font-size: 0.9rem;
      visibility: hidden;
      opacity: 0;
      transition: all var(--transition-medium);
    }
    
    .sandbox-indicator.active {
      visibility: visible;
      opacity: 1;
    }
    
    .workspace-body {
      display: flex;
      flex: 1;
      overflow: hidden;
      position: relative;
    }
    
    /* Main Content Area */
    .content-area {
      flex: 1;
      padding: 1.5rem;
      overflow-y: auto;
      position: relative;
      transition: all var(--transition-medium);
    }
    
    .content-area.dimmed {
      filter: brightness(0.9);
    }
    
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: auto;
      gap: 1.5rem;
      height: 100%;
      position: relative;
    }
    
    .grid-card {
      background: white;
      border-radius: 12px;
      border: 1px solid rgba(0, 0, 0, 0.05);
      overflow: hidden;
      box-shadow: var(--depth-surface);
      transition: all var(--transition-medium);
      display: flex;
      flex-direction: column;
      position: relative;
      transform-origin: center;
      transform-style: preserve-3d;
      perspective: 800px;
    }
    
    .grid-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--depth-floating);
    }
    
    .grid-card.highlighted {
      box-shadow: 0 0 0 2px var(--primary), var(--depth-floating);
    }
    
    .grid-card.staged {
      position: relative;
    }
    
    .grid-card.staged::before {
      content: "";
      position: absolute;
      inset: 0;
      border: 2px dashed var(--primary);
      border-radius: inherit;
      pointer-events: none;
      z-index: 10;
      opacity: 0.7;
    }
    
    .grid-card.modified::before {
      border-color: var(--status-modified);
    }
    
    .grid-card.added::before {
      border-color: var(--status-added);
    }
    
    .grid-card.removed::before {
      border-color: var(--status-removed);
    }
    
    /* 3D Card Transformations */
    .grid-card.staged.added {
      animation: card-rise 1s var(--easing-spring) forwards;
    }
    
    .grid-card.staged.removed {
      animation: card-sink 1s var(--easing-spring) forwards;
    }
    
    .grid-card.staged.modified {
      animation: card-transform 1s var(--easing-spring) forwards;
    }
    
    @keyframes card-rise {
      0% {
        transform: translateZ(-50px) scale(0.9);
        opacity: 0.5;
        box-shadow: var(--depth-surface);
      }
      100% {
        transform: translateZ(0) scale(1);
        opacity: 1;
        box-shadow: var(--depth-floating);
      }
    }
    
    @keyframes card-sink {
      0% {
        transform: translateZ(0) scale(1);
        opacity: 1;
      }
      100% {
        transform: translateZ(-30px) scale(0.95);
        opacity: 0.7;
      }
    }
    
    @keyframes card-transform {
      0% {
        transform: rotateY(-5deg);
      }
      50% {
        transform: rotateY(5deg);
      }
      100% {
        transform: rotateY(0);
      }
    }
    
    .grid-card-header {
      padding: 0.8rem 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }
    
    .grid-card-title {
      font-size: 0.9rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .grid-card-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 22px;
      height: 22px;
      border-radius: 6px;
      background: rgba(0, 0, 0, 0.05);
      font-size: 0.8rem;
    }
    
    .grid-card-body {
      flex: 1;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: relative;
    }
    
    .grid-card-footer {
      padding: 0.8rem 1rem;
      border-top: 1px solid rgba(0, 0, 0, 0.05);
      font-size: 0.8rem;
      color: var(--text-secondary);
      display: flex;
      justify-content: space-between;
    }
    
    .card-status {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      font-size: 0.8rem;
      font-weight: 500;
      padding: 0.2rem 0.5rem;
      border-radius: 10px;
    }
    
    .card-status.modified {
      background: var(--status-modified-bg);
      color: var(--status-modified);
    }
    
    .card-status.added {
      background: var(--status-added-bg);
      color: var(--status-added);
    }
    
    .card-status.removed {
      background: var(--status-removed-bg);
      color: var(--status-removed);
    }
    
    /* Visual Components */
    .metric-card {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      width: 100%;
      height: 100%;
      padding: 1rem;
    }
    
    .metric-value {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--primary);
    }
    
    .metric-label {
      font-size: 0.9rem;
      color: var(--text-secondary);
      text-align: center;
    }
    
    .chart-container {
      width: 100%;
      height: 100%;
      min-height: 150px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .table-container {
      width: 100%;
      overflow-x: auto;
    }
    
    .data-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.85rem;
    }
    
    .data-table th, 
    .data-table td {
      padding: 0.6rem 0.8rem;
      text-align: left;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }
    
    .data-table th {
      font-weight: 600;
      color: var(--text-secondary);
      background: rgba(0, 0, 0, 0.02);
    }
    
    .data-table tr:hover {
      background: rgba(0, 0, 0, 0.01);
    }
    
    .data-table tr.staged {
      position: relative;
    }
    
    .data-table tr.modified {
      background: var(--status-modified-bg);
    }
    
    .data-table tr.added {
      background: var(--status-added-bg);
      animation: row-fade-in 1s var(--easing-spring) forwards;
    }
    
    .data-table tr.removed {
      background: var(--status-removed-bg);
      text-decoration: line-through;
      opacity: 0.7;
      animation: row-fade-out 1s var(--easing-spring) forwards;
    }
    
    @keyframes row-fade-in {
      0% {
        opacity: 0;
        transform: translateY(-10px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes row-fade-out {
      0% {
        opacity: 0.7;
        transform: translateY(0);
      }
      100% {
        opacity: 0.3;
        transform: translateY(5px);
      }
    }
    
    /* Chart Representation */
    .chart-bars {
      display: flex;
      align-items: flex-end;
      justify-content: space-around;
      width: 100%;
      height: 100%;
      padding: 0 1rem 1rem;
    }
    
    .chart-bar {
      width: 24px;
      background: var(--primary-light);
      border-radius: 6px 6px 0 0;
      position: relative;
      transition: all var(--transition-medium);
    }
    
    .chart-bar::after {
      content: attr(data-value);
      position: absolute;
      bottom: -1.5rem;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.7rem;
      color: var(--text-secondary);
    }
    
    .chart-bar.staged {
      position: relative;
    }
    
    .chart-bar.modified {
      background: var(--status-modified);
      animation: bar-grow 1s var(--easing-spring) forwards;
    }
    
    .chart-bar.added {
      background: var(--status-added);
      animation: bar-appear 1s var(--easing-spring) forwards;
    }
    
    .chart-bar.removed {
      background: var(--status-removed);
      opacity: 0.5;
      animation: bar-shrink 1s var(--easing-spring) forwards;
    }
    
    @keyframes bar-grow {
      0% {
        transform: scaleY(0.7);
      }
      50% {
        transform: scaleY(1.1);
      }
      100% {
        transform: scaleY(1);
      }
    }
    
    @keyframes bar-appear {
      0% {
        transform: scaleY(0);
        opacity: 0;
      }
      100% {
        transform: scaleY(1);
        opacity: 1;
      }
    }
    
    @keyframes bar-shrink {
      0% {
        transform: scaleY(1);
        opacity: 0.5;
      }
      100% {
        transform: scaleY(0.6);
        opacity: 0.3;
      }
    }
    
    /* Enhanced AI Change Management Panel */
    .change-panel {
      width: 400px;
      background: white;
      border-left: 1px solid rgba(0, 0, 0, 0.05);
      display: flex;
      flex-direction: column;
      transition: transform var(--transition-medium);
      position: relative;
      transform: translateX(100%);
      box-shadow: -10px 0 30px rgba(0, 0, 0, 0.05);
    }
    
    .change-panel.active {
      transform: translateX(0);
    }
    
    .change-panel-header {
      padding: 1.2rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      background: var(--primary-light);
      color: white;
      position: relative;
      overflow: hidden;
    }
    
    .change-panel-header::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 200%;
      height: 100%;
      background: linear-gradient(90deg, 
                  rgba(255, 255, 255, 0) 0%, 
                  rgba(255, 255, 255, 0.2) 50%, 
                  rgba(255, 255, 255, 0) 100%);
      animation: header-shine 3s infinite linear;
      pointer-events: none;
    }
    
    @keyframes header-shine {
      0% {
        transform: translateX(-100%);
      }
      100% {
        transform: translateX(50%);
      }
    }
    
    .change-panel-title {
      font-weight: 600;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: white;
    }
    
    .change-panel-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 26px;
      height: 26px;
      border-radius: 6px;
      background: white;
      color: var(--primary);
      font-size: 0.9rem;
    }
    
    .change-panel-body {
      flex: 1;
      overflow-y: auto;
      position: relative;
    }
    
    /* Conversation Style Interface */
    .conversation-flow {
      padding: 1.5rem 0;
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }
    
    .ai-message-container {
      padding: 0 1.5rem;
      animation: message-appear 0.5s var(--easing-spring) forwards;
      opacity: 0;
      transform: translateY(10px);
    }
    
    @keyframes message-appear {
      0% {
        opacity: 0;
        transform: translateY(10px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .ai-message {
      background: var(--primary-glow);
      border-radius: 18px;
      border-bottom-left-radius: 4px;
      padding: 1.2rem;
      position: relative;
      color: var(--text-primary);
      box-shadow: var(--depth-surface);
    }
    
    .ai-message::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, 
                  rgba(114, 9, 183, 0.05) 0%, 
                  rgba(255, 255, 255, 0) 50%);
      border-radius: inherit;
      pointer-events: none;
    }
    
    .ai-avatar {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.8rem;
    }
    
    .avatar-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 26px;
      height: 26px;
      border-radius: 50%;
      background: var(--primary);
      color: white;
      font-size: 0.9rem;
    }
    
    .avatar-name {
      font-weight: 600;
      font-size: 0.9rem;
      color: var(--primary);
    }
    
    .message-body {
      font-size: 0.95rem;
      line-height: 1.6;
    }
    
    .message-body p {
      margin-bottom: 0.8rem;
    }
    
    .message-body p:last-child {
      margin-bottom: 0;
    }
    
    .change-summary {
      margin-top: 1.2rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.8rem;
    }
    
    .change-stat {
      flex: 1;
      min-width: 80px;
      padding: 0.8rem;
      background: var(--bg-primary);
      border-radius: 8px;
      text-align: center;
      box-shadow: var(--depth-surface);
      position: relative;
      overflow: hidden;
    }
    
    .change-stat::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, 
                  rgba(255, 255, 255, 0.3) 0%, 
                  rgba(255, 255, 255, 0) 50%);
      border-radius: inherit;
      pointer-events: none;
    }
    
    .change-stat.added {
      background: var(--status-added-bg);
    }
    
    .change-stat.modified {
      background: var(--status-modified-bg);
    }
    
    .change-stat.removed {
      background: var(--status-removed-bg);
    }
    
    .stat-value {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 0.2rem;
    }
    
    .stat-label {
      font-size: 0.8rem;
      color: var(--text-secondary);
    }
    
    .change-stat.added .stat-value {
      color: var(--status-added);
    }
    
    .change-stat.modified .stat-value {
      color: var(--status-modified);
    }
    
    .change-stat.removed .stat-value {
      color: var(--status-removed);
    }
    
    .change-timeline {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 1.5rem;
      padding: 0 0.5rem;
    }
    
    .timeline-step {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
    }
    
    .timeline-step:not(:last-child)::after {
      content: "";
      position: absolute;
      top: 15px;
      left: 50%;
      width: 100%;
      height: 2px;
      background: rgba(0, 0, 0, 0.1);
      transform: translateY(-50%);
      z-index: 0;
    }
    
    .step-number {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: var(--bg-primary);
      border: 2px solid rgba(0, 0, 0, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
      position: relative;
      z-index: 1;
      transition: all var(--transition-medium);
    }
    
    .step-number.completed {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }
    
    .step-number.active {
      border-color: var(--primary);
      color: var(--primary);
    }
    
    .step-label {
      font-size: 0.8rem;
      color: var(--text-secondary);
      text-align: center;
    }
    
    .timeline-step.active .step-label {
      color: var(--primary);
      font-weight: 500;
    }
    
    .timeline-step.completed .step-label {
      color: var(--text-primary);
      font-weight: 500;
    }
    
    .changes-list {
      display: flex;
      flex-direction: column;
      padding: 1.5rem;
    }
    
    .changes-group-header {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }
    
    /* Enhanced Change Cards */
    .change-card {
      background: white;
      border-radius: 16px;
      box-shadow: var(--depth-surface);
      overflow: hidden;
      margin-bottom: 1.5rem;
      transition: all var(--transition-medium);
      border: 1px solid rgba(0, 0, 0, 0.05);
      position: relative;
    }
    
    .change-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--depth-floating);
    }
    
    .change-card.modified {
      border-left: 4px solid var(--status-modified);
    }
    
    .change-card.added {
      border-left: 4px solid var(--status-added);
    }
    
    .change-card.removed {
      border-left: 4px solid var(--status-removed);
    }
    
    .change-card.selected {
      box-shadow: 0 0 0 2px var(--primary), var(--depth-floating);
    }
    
    .change-card-header {
      padding: 1rem 1.2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }
    
    .change-title {
      font-weight: 600;
      font-size: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .change-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 24px;
      height: 24px;
      border-radius: 6px;
      color: var(--text-primary);
      font-size: 0.9rem;
    }
    
    .modified .change-icon {
      background: var(--status-modified-bg);
      color: var(--status-modified);
    }
    
    .added .change-icon {
      background: var(--status-added-bg);
      color: var(--status-added);
    }
    
    .removed .change-icon {
      background: var(--status-removed-bg);
      color: var(--status-removed);
    }
    
    .change-tag {
      padding: 0.3rem 0.8rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 500;
    }
    
    .modified .change-tag {
      background: var(--status-modified-bg);
      color: var(--status-modified);
    }
    
    .added .change-tag {
      background: var(--status-added-bg);
      color: var(--status-added);
    }
    
    .removed .change-tag {
      background: var(--status-removed-bg);
      color: var(--status-removed);
    }
    
    .change-card-body {
      padding: 1rem 1.2rem;
    }
    
    .change-description {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-bottom: 1rem;
      line-height: 1.6;
    }
    
    .change-preview {
      margin-top: 1.2rem;
      margin-bottom: 1rem;
      background: var(--bg-primary);
      border-radius: 8px;
      padding: 1rem;
      font-size: 0.85rem;
      position: relative;
    }
    
    .preview-badge {
      position: absolute;
      top: -0.5rem;
      left: 1rem;
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      background: white;
      border: 1px solid rgba(0, 0, 0, 0.1);
    }
    
    .change-intent {
      font-style: italic;
      color: var(--primary);
      font-size: 0.85rem;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .intent-icon {
      font-size: 1rem;
    }
    
    .change-actions {
      display: flex;
      gap: 0.8rem;
      margin-top: 1rem;
    }
    
    .change-action {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.7rem 1rem;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: all var(--transition-fast);
      background: var(--bg-primary);
      color: var(--text-primary);
      border: none;
    }
    
    .change-action:hover {
      transform: translateY(-3px);
      box-shadow: var(--depth-surface);
    }
    
    .action-preview {
      background: white;
      border: 1px solid rgba(0, 0, 0, 0.1);
    }
    
    .action-accept {
      background: var(--status-added-bg);
      color: var(--status-added);
    }
    
    .action-accept:hover {
      background: var(--status-added);
      color: white;
    }
    
    .action-reject {
      background: var(--status-removed-bg);
      color: var(--status-removed);
    }
    
    .action-reject:hover {
      background: var(--status-removed);
      color: white;
    }
    
    .action-icon {
      font-size: 1.1rem;
    }
    
    .change-panel-footer {
      padding: 1.2rem 1.5rem;
      border-top: 1px solid rgba(0, 0, 0, 0.05);
      display: flex;
      flex-direction: column;
      gap: 1rem;
      background: white;
    }
    
    .panel-progress {
      height: 6px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 3px;
      overflow: hidden;
    }
    
    .progress-bar {
      height: 100%;
      background: var(--primary);
      width: 0%;
      transition: width var(--transition-medium);
    }
    
    .panel-actions {
      display: flex;
      gap: 1rem;
    }
    
    .panel-btn {
      flex: 1;
      padding: 0.8rem;
      border-radius: 8px;
      border: none;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      transition: all var(--transition-fast);
    }
    
    .panel-btn:hover {
      transform: translateY(-3px);
    }
    
    .panel-btn-primary {
      background: var(--primary);
      color: white;
      box-shadow: 0 4px 12px rgba(114, 9, 183, 0.2);
    }
    
    .panel-btn-primary:hover {
      background: var(--primary-dark);
      box-shadow: 0 6px 15px rgba(114, 9, 183, 0.3);
    }
    
    .panel-btn-secondary {
      background: var(--bg-primary);
      color: var(--text-primary);
    }
    
    .panel-btn-secondary:hover {
      background: rgba(0, 0, 0, 0.05);
    }
    
    .panel-btn-primary:disabled {
      background: rgba(114, 9, 183, 0.3);
      cursor: not-allowed;
      transform: none;
    }
    
    /* Enhanced Before/After Slider */
    .diff-slider {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      pointer-events: none;
      transition: opacity var(--transition-medium);
    }
    
    .diff-slider.active {
      opacity: 1;
      pointer-events: auto;
    }
    
    .slider-container {
      width: 90%;
      max-width: 900px;
      max-height: 90vh;
      background: white;
      border-radius: 20px;
      box-shadow: var(--depth-modal);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transform: translateY(20px) scale(0.95);
      transition: all var(--transition-medium);
    }
    
    .diff-slider.active .slider-container {
      transform: translateY(0) scale(1);
    }
    
    .slider-header {
      padding: 1.2rem 1.5rem;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: var(--primary-light);
      color: white;
    }
    
    .slider-title {
      font-weight: 600;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .slider-controls {
      display: flex;
      gap: 0.8rem;
    }
    
    .slider-control {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      cursor: pointer;
      transition: all var(--transition-fast);
    }
    
    .slider-control:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.1);
    }
    
    .slider-body {
      flex: 1;
      overflow: hidden;
      padding: 2rem;
      min-height: 300px;
      position: relative;
    }
    
    .before-after-slider {
      width: 100%;
      height: 100%;
      position: relative;
      overflow: hidden;
      border-radius: 12px;
      box-shadow: var(--depth-floating);
    }
    
    .slider-before,
    .slider-after {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    
    .slider-after {
      width: 50%;
      border-right: 2px solid white;
      box-shadow: 5px 0 25px rgba(0, 0, 0, 0.2);
    }
    
    .slider-labels {
      position: absolute;
      top: 1rem;
      left: 0;
      width: 100%;
      display: flex;
      justify-content: space-between;
      padding: 0 2rem;
      pointer-events: none;
    }
    
    .slider-label {
      padding: 0.5rem 1rem;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      border-radius: 4px;
      font-weight: 500;
      font-size: 0.8rem;
    }
    
    .slider-handle {
      position: absolute;
      top: 0;
      bottom: 0;
      left: 50%;
      width: 40px;
      transform: translateX(-50%);
      cursor: ew-resize;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }
    
    .slider-handle::before {
      content: "";
      position: absolute;
      top: 0;
      bottom: 0;
      left: 50%;
      width: 2px;
      background: white;
      transform: translateX(-50%);
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    }
    
    .slider-handle-knob {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
    }
    
    .slider-footer {
      padding: 1.2rem 1.5rem;
      border-top: 1px solid rgba(0, 0, 0, 0.05);
      display: flex;
      justify-content: space-between;
      background: white;
    }
    
    .slider-status {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--text-secondary);
      font-size: 0.9rem;
    }
    
    .slider-actions {
      display: flex;
      gap: 1rem;
    }
    
    .slider-btn {
      padding: 0.7rem 1.2rem;
      border-radius: 8px;
      border: none;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      transition: all var(--transition-fast);
    }
    
    .slider-btn:hover {
      transform: translateY(-3px);
    }
    
    .slider-btn-primary {
      background: var(--primary);
      color: white;
      box-shadow: 0 4px 12px rgba(114, 9, 183, 0.2);
    }
    
    .slider-btn-primary:hover {
      background: var(--primary-dark);
      box-shadow: 0 6px 15px rgba(114, 9, 183, 0.3);
    }
    
    .slider-btn-secondary {
      background: var(--bg-primary);
      color: var(--text-primary);
    }
    
    .slider-btn-secondary:hover {
      background: rgba(0, 0, 0, 0.05);
    }
    
    /* Enhanced AI Elements */
    .ai-nucleus-container {
      position: absolute;
      bottom: 2rem;
      right: 2rem;
      width: 70px;
      height: 70px;
      perspective: 800px;
      z-index: 100;
    }
    
    .ai-nucleus {
      position: absolute;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      transition: all var(--transition-medium);
      transform-style: preserve-3d;
      transform-origin: center;
      box-shadow: 0 0 0 rgba(114, 9, 183, 0.4);
      animation: pulse 2s infinite;
      z-index: 10;
      overflow: hidden;
    }
    
    .ai-nucleus::before {
      content: "";
      position: absolute;
      inset: -2px;
      background: conic-gradient(from 0deg, var(--primary), var(--primary-light), var(--accent), var(--secondary), var(--primary));
      border-radius: inherit;
      animation: rotate-hue 4s linear infinite;
      opacity: 0.7;
      z-index: -1;
    }
    
    .ai-nucleus::after {
      content: "";
      position: absolute;
      inset: 2px;
      background: var(--primary);
      border-radius: inherit;
      z-index: -1;
    }
    
    .ai-nucleus.active {
      animation: nucleus-pulse 1.5s infinite alternate;
    }
    
    .ai-nucleus.thinking {
      animation: nucleus-thinking 2s infinite alternate;
    }
    
    @keyframes nucleus-pulse {
      0% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(114, 9, 183, 0.4);
      }
      100% {
        transform: scale(1.1);
        box-shadow: 0 0 0 15px rgba(114, 9, 183, 0);
      }
    }
    
    @keyframes nucleus-thinking {
      0% {
        transform: scale(1) rotate(0deg);
        box-shadow: 0 0 0 0 rgba(114, 9, 183, 0.4);
      }
      100% {
        transform: scale(1.1) rotate(10deg);
        box-shadow: 0 0 0 15px rgba(114, 9, 183, 0);
      }
    }
    
    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(114, 9, 183, 0.4);
      }
      70% {
        box-shadow: 0 0 0 15px rgba(114, 9, 183, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(114, 9, 183, 0);
      }
    }
    
    @keyframes rotate-hue {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }
    
    /* Enhanced AI Thinking Visualization */
    .ai-thinking-visualization {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 10;
      opacity: 0;
      transition: opacity var(--transition-medium);
    }
    
    .ai-thinking-visualization.active {
      opacity: 1;
    }
    
    .thinking-node {
      position: absolute;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--primary-light);
      opacity: 0.7;
      z-index: 5;
    }
    
    .thinking-connection {
      position: absolute;
      height: 2px;
      background: var(--primary-light);
      transform-origin: left center;
      opacity: 0.4;
      z-index: 4;
    }
    
    /* Spotlight Effect */
    .spotlight-container {
      position: absolute;
      pointer-events: none;
      inset: 0;
      z-index: 5;
      overflow: hidden;
      opacity: 0;
      transition: opacity var(--transition-medium);
    }
    
    .spotlight-container.active {
      opacity: 1;
    }
    
    .spotlight {
      position: absolute;
      width: var(--spotlight-radius);
      height: var(--spotlight-radius);
      border-radius: 50%;
      background: radial-gradient(
        circle at center,
        rgba(255, 255, 255, 0.7) 0%,
        rgba(255, 255, 255, 0) 70%
      );
      pointer-events: none;
      z-index: 5;
      transform: translate(-50%, -50%);
    }
    
    .spotlight::after {
      content: "";
      position: absolute;
      inset: -10px;
      border-radius: 50%;
      background: transparent;
      border: 2px solid rgba(114, 9, 183, 0.3);
      opacity: 0;
      animation: spotlight-pulse 2s infinite;
    }
    
    @keyframes spotlight-pulse {
      0%, 100% {
        transform: scale(1);
        opacity: 0;
      }
      50% {
        transform: scale(1.1);
        opacity: 0.5;
      }
    }
    
    /* Light Rays Effect */
    .light-rays {
      position: absolute;
      pointer-events: none;
      opacity: 0;
      transition: opacity var(--transition-medium);
    }
    
    .light-rays.active {
      opacity: 1;
    }
    
    .light-ray {
      position: absolute;
      background: linear-gradient(90deg, 
        rgba(114, 9, 183, 0) 0%,
        rgba(114, 9, 183, 0.1) 50%,
        rgba(114, 9, 183, 0) 100%
      );
      transform-origin: left center;
    }
    
    /* Commit Process Animation */
    .commit-process {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      opacity: 0;
      pointer-events: none;
      transition: opacity var(--transition-medium);
    }
    
    .commit-process.active {
      opacity: 1;
      pointer-events: auto;
    }
    
    .commit-container {
      width: 90%;
      max-width: 600px;
      background: white;
      border-radius: 24px;
      padding: 2rem;
      box-shadow: var(--depth-modal);
      text-align: center;
      transform: translateY(20px);
      transition: all var(--transition-medium);
    }
    
    .commit-process.active .commit-container {
      transform: translateY(0);
    }
    
    .commit-icon {
      font-size: 4rem;
      margin-bottom: 1.5rem;
      display: inline-block;
      color: var(--primary);
      animation: commit-icon-appear 0.5s var(--easing-spring) forwards;
      opacity: 0;
      transform: scale(0.5);
    }
    
    @keyframes commit-icon-appear {
      0% {
        opacity: 0;
        transform: scale(0.5);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }
    
    .commit-title {
      font-size: 1.8rem;
      margin-bottom: 1rem;
      color: var(--text-primary);
      opacity: 0;
      transform: translateY(20px);
      animation: commit-text-appear 0.5s var(--easing-spring) 0.2s forwards;
    }
    
    .commit-subtitle {
      font-size: 1.1rem;
      color: var(--text-secondary);
      margin-bottom: 2rem;
      opacity: 0;
      transform: translateY(20px);
      animation: commit-text-appear 0.5s var(--easing-spring) 0.4s forwards;
    }
    
    @keyframes commit-text-appear {
      0% {
        opacity: 0;
        transform: translateY(20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .commit-progress {
      height: 6px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 3px;
      overflow: hidden;
      margin-bottom: 1.5rem;
    }
    
    .commit-progress-bar {
      height: 100%;
      background: var(--primary);
      width: 0%;
      transition: width 2s ease;
    }
    
    .commit-status {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-bottom: 2rem;
      min-height: 1.5em;
    }
    
    .commit-actions {
      display: flex;
      justify-content: center;
      gap: 1rem;
      opacity: 0;
      transform: translateY(20px);
      animation: commit-text-appear 0.5s var(--easing-spring) 1s forwards;
    }
    
    .commit-btn {
      padding: 0.8rem 2rem;
      border-radius: 8px;
      border: none;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all var(--transition-fast);
    }
    
    .commit-btn-primary {
      background: var(--primary);
      color: white;
      box-shadow: 0 4px 12px rgba(114, 9, 183, 0.2);
    }
    
    .commit-btn-primary:hover {
      background: var(--primary-dark);
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(114, 9, 183, 0.3);
    }
    
    .commit-applied {
      margin-top: 2rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      opacity: 0;
      pointer-events: none;
      transition: all var(--transition-medium);
    }
    
    .commit-applied.active {
      opacity: 1;
      pointer-events: auto;
    }
    
    .applied-item {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      padding: 0.8rem 1rem;
      background: var(--bg-primary);
      border-radius: 8px;
      transition: all var(--transition-medium);
      opacity: 0;
      transform: translateY(10px);
    }
    
    .applied-item.active {
      opacity: 1;
      transform: translateY(0);
    }
    
    .applied-icon {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--status-added);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
    }
    
    .applied-text {
      flex: 1;
      font-size: 0.9rem;
      color: var(--text-primary);
    }
    
    /* Question Tooltip */
    .question-tooltip {
      position: absolute;
      background: white;
      border-radius: 12px;
      box-shadow: var(--depth-floating);
      padding: 1rem;
      max-width: 300px;
      z-index: 100;
      opacity: 0;
      pointer-events: none;
      transition: all var(--transition-medium);
      transform: scale(0.95) translateY(10px);
    }
    
    .question-tooltip.active {
      opacity: 1;
      pointer-events: auto;
      transform: scale(1) translateY(0);
    }
    
    .question-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 0.8rem;
    }
    
    .question-title {
      font-weight: 600;
      font-size: 0.9rem;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .question-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--primary-glow);
      color: var(--primary);
      font-size: 0.9rem;
    }
    
    .question-close {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.05);
      color: var(--text-secondary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all var(--transition-fast);
    }
    
    .question-close:hover {
      background: rgba(0, 0, 0, 0.1);
      color: var(--text-primary);
    }
    
    .question-content {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-bottom: 0.8rem;
      line-height: 1.6;
    }
    
    /* Controls */
    .demo-controls {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      justify-content: center;
      position: relative;
      z-index: 5;
    }
    
    .demo-control-btn {
      padding: 0.8rem 1.2rem;
      border-radius: 10px;
      border: none;
      background: rgba(0, 0, 0, 0.05);
      color: var(--text-primary);
      font-weight: 500;
      cursor: pointer;
      transition: all var(--transition-fast);
      position: relative;
      overflow: hidden;
    }
    
    .demo-control-btn::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, 
                  rgba(255, 255, 255, 0) 0%, 
                  rgba(255, 255, 255, 0.2) 50%, 
                  rgba(255, 255, 255, 0) 100%);
      transform: translateX(-100%);
      transition: transform 0.6s;
      pointer-events: none;
    }
    
    .demo-control-btn:hover::before {
      transform: translateX(100%);
    }
    
    .demo-control-btn:hover {
      background: rgba(0, 0, 0, 0.1);
      transform: translateY(-3px);
    }
    
    .demo-control-btn.active {
      background: var(--primary);
      color: white;
    }
    
    /* Responsive Styles */
    @media (max-width: 1200px) {
      .dashboard-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    @media (max-width: 992px) {
      .workspace-body {
        flex-direction: column;
      }
      
      .change-panel {
        width: 100%;
        height: 350px;
        transform: translateY(100%);
        border-left: none;
        border-top: 1px solid rgba(0, 0, 0, 0.05);
      }
      
      .change-panel.active {
        transform: translateY(0);
      }
      
      .before-after-slider {
        height: 400px;
      }
    }
    
    @media (max-width: 768px) {
      .dashboard-grid {
        grid-template-columns: 1fr;
      }
      
      .workspace-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
      }
      
      .workspace-controls {
        width: 100%;
        justify-content: space-between;
      }
      
      .change-card-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
      }
      
      .slider-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
      }
      
      .slider-controls {
        width: 100%;
        justify-content: flex-end;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="header">
      <h1 class="title">Kickoff Enhanced AI Change Management</h1>
      <p class="subtitle">Experience a natural, intuitive way to collaborate with AI on dashboard improvements with enhanced visual feedback and complete control.</p>
    </header>
    
    <div class="ai-workspace">
      <div class="workspace-container" id="workspaceContainer">
        <div class="workspace-header" id="workspaceHeader">
          <div class="workspace-title">
            <div class="workspace-title-icon">K</div>
            Market Analysis Dashboard
          </div>
          
          <div class="workspace-controls">
            <div class="sandbox-indicator" id="sandboxIndicator">
              <span>Sandbox Mode Active</span>
            </div>
            <div class="workspace-control" id="toggleChangesBtn">
              <span>View AI Insights</span>
              <span id="changeCount" class="card-status modified">5</span>
            </div>
            <div class="workspace-control">
              <span>Last Updated:</span>
              <span>Today, 2:45 PM</span>
            </div>
          </div>
        </div>
        
        <div class="workspace-body">
          <!-- Main Content Area -->
          <div class="content-area" id="contentArea">
            <div class="dashboard-grid">
              <!-- Metric Card 1 -->
              <div class="grid-card">
                <div class="grid-card-header">
                  <div class="grid-card-title">
                    <div class="grid-card-icon">ðŸ“Š</div>
                    <span>Total Users</span>
                  </div>
                </div>
                <div class="grid-card-body">
                  <div class="metric-card">
                    <div class="metric-value">24,582</div>
                    <div class="metric-label">Active users this month</div>
                  </div>
                </div>
                <div class="grid-card-footer">
                  <span>Updated 2 hours ago</span>
                </div>
              </div>
              
              <!-- Metric Card 2 - Modified -->
              <div class="grid-card" id="conversionMetric">
                <div class="grid-card-header">
                  <div class="grid-card-title">
                    <div class="grid-card-icon">ðŸ’°</div>
                    <span>Conversion Rate</span>
                  </div>
                </div>
                <div class="grid-card-body">
                  <div class="metric-card">
                    <div class="metric-value">3.2%</div>
                    <div class="metric-label">Average conversion rate</div>
                  </div>
                </div>
                <div class="grid-card-footer">
                  <span>Updated 2 hours ago</span>
                </div>
              </div>
              
              <!-- Chart Card 1 - Modified -->
              <div class="grid-card" id="revenueChart">
                <div class="grid-card-header">
                  <div class="grid-card-title">
                    <div class="grid-card-icon">ðŸ“ˆ</div>
                    <span>Revenue Growth</span>
                  </div>
                </div>
                <div class="grid-card-body">
                  <div class="chart-container">
                    <div class="chart-bars">
                      <div class="chart-bar" style="height: 60%" data-value="$15K"></div>
                      <div class="chart-bar" style="height: 75%" data-value="$19K"></div>
                      <div class="chart-bar" style="height: 42%" data-value="$10K"></div>
                      <div class="chart-bar" style="height: 65%" data-value="$16K"></div>
                      <div class="chart-bar" style="height: 65%" data-value="$16K"></div>
                    </div>
                  </div>
                </div>
                <div class="grid-card-footer">
                  <span>Last 6 months</span>
                </div>
              </div>
              
              <!-- Table Card - Modified -->
              <div class="grid-card" id="marketingTable">
                <div class="grid-card-header">
                  <div class="grid-card-title">
                    <div class="grid-card-icon">ðŸŽ¯</div>
                    <span>Marketing Channels</span>
                  </div>
                </div>
                <div class="grid-card-body">
                  <div class="table-container">
                    <table class="data-table">
                      <thead>
                        <tr>
                          <th>Channel</th>
                          <th>Users</th>
                          <th>Conv. %</th>
                          <th>CPA</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>Organic Search</td>
                          <td>8,421</td>
                          <td>4.7%</td>
                          <td>$12.40</td>
                        </tr>
                        <tr>
                          <td>Paid Search</td>
                          <td>5,283</td>
                          <td>3.2%</td>
                          <td>$21.75</td>
                        </tr>
                        <tr>
                          <td>Social Media</td>
                          <td>5,193</td>
                          <td>2.5%</td>
                          <td>$22.30</td>
                        </tr>
                        <tr>
                          <td>Email</td>
                          <td>1,725</td>
                          <td>2.1%</td>
                          <td>$14.80</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="grid-card-footer">
                  <span>Last 30 days</span>
                </div>
              </div>
              
              <!-- Chart Card 2 -->
              <div class="grid-card">
                <div class="grid-card-header">
                  <div class="grid-card-title">
                    <div class="grid-card-icon">ðŸ“…</div>
                    <span>User Retention</span>
                  </div>
                </div>
                <div class="grid-card-body">
                  <div class="chart-container">
                    <div class="chart-bars">
                      <div class="chart-bar" style="height: 90%" data-value="W1"></div>
                      <div class="chart-bar" style="height: 70%" data-value="W2"></div>
                      <div class="chart-bar" style="height: 60%" data-value="W3"></div>
                      <div class="chart-bar" style="height: 50%" data-value="W4"></div>
                    </div>
                  </div>
                </div>
                <div class="grid-card-footer">
                  <span>Weekly retention</span>
                </div>
              </div>
              
              <!-- Normal Card -->
              <div class="grid-card">
                <div class="grid-card-header">
                  <div class="grid-card-title">
                    <div class="grid-card-icon">ðŸŒŽ</div>
                    <span>Geographic Distribution</span>
                  </div>
                </div>
                <div class="grid-card-body">
                  <div class="chart-container">
                    <div class="chart-bars">
                      <div class="chart-bar" style="height: 80%" data-value="NA"></div>
                      <div class="chart-bar" style="height: 60%" data-value="EU"></div>
                      <div class="chart-bar" style="height: 40%" data-value="APAC"></div>
                      <div class="chart-bar" style="height: 20%" data-value="LATAM"></div>
                    </div>
                  </div>
                </div>
                <div class="grid-card-footer">
                  <span>By region</span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Enhanced AI Change Management Panel -->
          <div class="change-panel" id="changePanel">
            <div class="change-panel-header">
              <div class="change-panel-title">
                <div class="change-panel-icon">âœ¨</div>
                AI Insights & Recommendations
              </div>
            </div>
            
            <div class="change-panel-body">
              <!-- Conversational Interface -->
              <div class="conversation-flow">
                <!-- Introduction Message -->
                <div class="ai-message-container">
                  <div class="ai-message">
                    <div class="ai-avatar">
                      <div class="avatar-icon">K</div>
                      <div class="avatar-name">Kickoff AI</div>
                    </div>
                    <div class="message-body">
                      <p>I've analyzed your dashboard and found some opportunities to enhance its effectiveness. I've prepared the following recommendations based on your recent data:</p>
                      
                      <div class="change-summary">
                        <div class="change-stat added">
                          <div class="stat-value">1</div>
                          <div class="stat-label">New Insight</div>
                        </div>
                        <div class="change-stat modified">
                          <div class="stat-value">3</div>
                          <div class="stat-label">Enhancements</div>
                        </div>
                        <div class="change-stat removed">
                          <div class="stat-value">1</div>
                          <div class="stat-label">Optimization</div>
                        </div>
                      </div>
                      
                      <p>You can explore each suggestion, see exactly what would change, and decide which improvements you'd like to apply. I'll guide you through the process step by step.</p>
                      
                      <div class="change-timeline">
                        <div class="timeline-step active">
                          <div class="step-number active">1</div>
                          <div class="step-label">Review</div>
                        </div>
                        <div class="timeline-step">
                          <div class="step-number">2</div>
                          <div class="step-label">Preview</div>
                        </div>
                        <div class="timeline-step">
                          <div class="step-number">3</div>
                          <div class="step-label">Apply</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Changes List Section -->
              <div class="changes-list">
                <div class="changes-group-header">
                  Recommended Improvements
                </div>
                
                <!-- Conversion Rate Card -->
                <div class="change-card modified" id="conversionRateCard" data-target="conversionMetric">
                  <div class="change-card-header">
                    <div class="change-title">
                      <div class="change-icon">ðŸ’°</div>
                      Conversion Rate Update
                    </div>
                    <div class="change-tag">Enhancement</div>
                  </div>
                  <div class="change-card-body">
                    <div class="change-description">
                      I found that your conversion data can be more insightful by segmenting it by user type. New users show a 4.8% conversion rate, much higher than returning users.
                    </div>
                    
                    <div class="change-intent">
                      <span class="intent-icon">ðŸŽ¯</span>
                      <span>Purpose: Highlight your strongest conversion segment</span>
                    </div>
                    
                    <div class="change-actions">
                      <button class="change-action action-preview" data-action="view" data-target="conversionMetric">
                        <span class="action-icon">ðŸ‘ï¸</span>
                        <span>Preview Change</span>
                      </button>
                    </div>
                  </div>
                </div>
                
                <!-- Revenue Growth Card -->
                <div class="change-card modified" id="revenueGrowthCard" data-target="revenueChart">
                  <div class="change-card-header">
                    <div class="change-title">
                      <div class="change-icon">ðŸ“ˆ</div>
                      Revenue Growth Visualization
                    </div>
                    <div class="change-tag">Enhancement</div>
                  </div>
                  <div class="change-card-body">
                    <div class="change-description">
                      I've corrected the April revenue data based on the latest reconciliation reports (+40%). I've also added a June forecast based on current growth trends.
                    </div>
                    
                    <div class="change-intent">
                      <span class="intent-icon">ðŸ§®</span>
                      <span>Purpose: Reflect accurate data and provide forward visibility</span>
                    </div>
                    
                    <div class="change-actions">
                      <button class="change-action action-preview" data-action="view" data-target="revenueChart">
                        <span class="action-icon">ðŸ‘ï¸</span>
                        <span>Preview Change</span>
                      </button>
                    </div>
                  </div>
                </div>
                
                <!-- Marketing Channels Card -->
                <div class="change-card modified" id="marketingChannelsCard" data-target="marketingTable">
                  <div class="change-card-header">
                    <div class="change-title">
                      <div class="change-icon">ðŸŽ¯</div>
                      Marketing Channel Optimization
                    </div>
                    <div class="change-tag">Enhancement</div>
                  </div>
                  <div class="change-card-body">
                    <div class="change-description">
                      I've updated the Paid Search performance with the latest data, added your new high-performing Referral Partners channel, and suggested removing the underperforming Email channel.
                    </div>
                    
                    <div class="change-intent">
                      <span class="intent-icon">ðŸ’¡</span>
                      <span>Purpose: Focus on your best-performing acquisition channels</span>
                    </div>
                    
                    <div class="change-actions">
                      <button class="change-action action-preview" data-action="view" data-target="marketingTable">
                        <span class="action-icon">ðŸ‘ï¸</span>
                        <span>Preview Change</span>
                      </button>
                    </div>
                  </div>
                </div>
                
                <!-- Customer Segments Card -->
                <div class="change-card added" id="customerSegmentsCard" data-target="customerSegment">
                  <div class="change-card-header">
                    <div class="change-title">
                      <div class="change-icon">ðŸ‘¥</div>
                      Customer Segments Visualization
                    </div>
                    <div class="change-tag">New Insight</div>
                  </div>
                  <div class="change-card-body">
                    <div class="change-description">
                      I've created a new visualization showing revenue contribution by customer segment. This reveals that SMB customers contribute 60% of your revenue despite being only 40% of your user base.
                    </div>
                    
                    <div class="change-intent">
                      <span class="intent-icon">âœ¨</span>
                      <span>Purpose: Identify your most valuable customer segments</span>
                    </div>
                    
                    <div class="change-actions">
                      <button class="change-action action-preview" data-action="view" data-target="customerSegment">
                        <span class="action-icon">ðŸ‘ï¸</span>
                        <span>Preview Change</span>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="change-panel-footer">
              <div class="panel-progress">
                <div class="progress-bar" id="progressBar" style="width: 33%;"></div>
              </div>
              <div class="panel-actions">
                <button class="panel-btn panel-btn-primary" id="reviewChangesBtn">Preview Selected Changes</button>
                <button class="panel-btn panel-btn-secondary" id="closeChangesBtn">Cancel</button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- AI Nucleus -->
        <div class="ai-nucleus-container">
          <div class="ai-nucleus active" id="aiNucleus">K</div>
        </div>
        
        <!-- AI Thinking Visualization -->
        <div class="ai-thinking-visualization" id="aiThinkingVisualization"></div>
        
        <!-- Spotlight Effect -->
        <div class="spotlight-container" id="spotlightContainer">
          <div class="spotlight" id="spotlight"></div>
        </div>
        
        <!-- Light Rays Effect -->
        <div class="light-rays" id="lightRays"></div>
        
        <!-- Question Tooltip -->
        <div class="question-tooltip" id="questionTooltip">
          <div class="question-header">
            <div class="question-title">
              <div class="question-icon">?</div>
              <span>Why this change?</span>
            </div>
            <div class="question-close" id="closeQuestionBtn">Ã—</div>
          </div>
          <div class="question-content">
            I noticed that your email marketing channel has the lowest conversion rate (2.1%) and highest cost per acquisition, making it less efficient than your other channels.
          </div>
        </div>
      </div>
      
      <!-- Enhanced Before/After Slider -->
      <div class="diff-slider" id="diffSlider">
        <div class="slider-container">
          <div class="slider-header">
            <div class="slider-title">
              <span id="sliderTitle">Comparing Current vs. Enhanced Version</span>
            </div>
            <div class="slider-controls">
              <div class="slider-control" id="closeSliderBtn">Ã—</div>
            </div>
          </div>
          
          <div class="slider-body">
            <div class="before-after-slider" id="beforeAfterSlider">
              <div class="slider-labels">
                <div class="slider-label">Current</div>
                <div class="slider-label">Enhanced</div>
              </div>
              
              <div class="slider-before" id="sliderBefore">
                <!-- Content will be inserted dynamically -->
              </div>
              
              <div class="slider-after" id="sliderAfter">
                <!-- Content will be inserted dynamically -->
              </div>
              
              <div class="slider-handle" id="sliderHandle">
                <div class="slider-handle-knob">â†”</div>
              </div>
            </div>
          </div>
          
          <div class="slider-footer">
            <div class="slider-status">
              <span>Drag slider to compare versions</span>
            </div>
            <div class="slider-actions">
              <button class="slider-btn slider-btn-secondary" id="cancelSliderBtn">Cancel</button>
              <button class="slider-btn slider-btn-primary" id="acceptChangeBtn">Accept This Change</button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Commit Process Animation -->
      <div class="commit-process" id="commitProcess">
        <div class="commit-container">
          <div class="commit-icon">âœ“</div>
          <div class="commit-title">Applying Selected Changes</div>
          <div class="commit-subtitle">Your dashboard is being updated with the improvements you selected</div>
          
          <div class="commit-progress">
            <div class="commit-progress-bar" id="commitProgressBar"></div>
          </div>
          <div class="commit-status" id="commitStatus">Initializing changes...</div>
          
          <div class="commit-applied" id="appliedChanges">
            <!-- Will be populated dynamically -->
          </div>
          
          <div class="commit-actions">
            <button class="commit-btn commit-btn-primary" id="finishCommitBtn" style="display: none;">
              Return to Dashboard
            </button>
          </div>
        </div>
      </div>
      
      <div class="demo-controls">
        <button class="demo-control-btn" id="startAiAnalysisBtn">Start AI Analysis</button>
        <button class="demo-control-btn" id="showChangesPanelBtn">Show Insights Panel</button>
        <button class="demo-control-btn" id="showSliderBtn">Show Before/After Slider</button>
        <button class="demo-control-btn" id="showCommitBtn">Show Changes Process</button>
      </div>
    </div>
  </div>
  
  <script>
    // Main Elements
    const workspaceContainer = document.getElementById('workspaceContainer');
    const workspaceHeader = document.getElementById('workspaceHeader');
    const contentArea = document.getElementById('contentArea');
    const changePanel = document.getElementById('changePanel');
    const sandboxIndicator = document.getElementById('sandboxIndicator');
    const aiNucleus = document.getElementById('aiNucleus');
    const aiThinkingVisualization = document.getElementById('aiThinkingVisualization');
    const spotlightContainer = document.getElementById('spotlightContainer');
    const spotlight = document.getElementById('spotlight');
    const lightRays = document.getElementById('lightRays');
    const questionTooltip = document.getElementById('questionTooltip');
    const closeQuestionBtn = document.getElementById('closeQuestionBtn');
    const diffSlider = document.getElementById('diffSlider');
    const sliderTitle = document.getElementById('sliderTitle');
    const sliderBefore = document.getElementById('sliderBefore');
    const sliderAfter = document.getElementById('sliderAfter');
    const sliderHandle = document.getElementById('sliderHandle');
    const closeSliderBtn = document.getElementById('closeSliderBtn');
    const cancelSliderBtn = document.getElementById('cancelSliderBtn');
    const acceptChangeBtn = document.getElementById('acceptChangeBtn');
    const commitProcess = document.getElementById('commitProcess');
    const commitProgressBar = document.getElementById('commitProgressBar');
    const commitStatus = document.getElementById('commitStatus');
    const appliedChanges = document.getElementById('appliedChanges');
    const finishCommitBtn = document.getElementById('finishCommitBtn');
    const progressBar = document.getElementById('progressBar');
    
    // Control Buttons
    const toggleChangesBtn = document.getElementById('toggleChangesBtn');
    const closeChangesBtn = document.getElementById('closeChangesBtn');
    const reviewChangesBtn = document.getElementById('reviewChangesBtn');
    const startAiAnalysisBtn = document.getElementById('startAiAnalysisBtn');
    const showChangesPanelBtn = document.getElementById('showChangesPanelBtn');
    const showSliderBtn = document.getElementById('showSliderBtn');
    const showCommitBtn = document.getElementById('showCommitBtn');
    
    // State Variables
    let selectedChanges = new Set();
    let currentStep = 1;
    let sandboxMode = false;
    let isDragging = false;
    let startPositionX = 0;
    let initialSliderLeft = 50;
    
    // Initialize Timeline
    function updateTimeline(step) {
      const steps = document.querySelectorAll('.timeline-step');
      
      steps.forEach((stepElement, index) => {
        const stepNumber = stepElement.querySelector('.step-number');
        
        if (index + 1 < step) {
          stepElement.classList.add('completed');
          stepNumber.classList.add('completed');
          stepElement.classList.remove('active');
          stepNumber.classList.remove('active');
        } else if (index + 1 === step) {
          stepElement.classList.add('active');
          stepNumber.classList.add('active');
          stepElement.classList.remove('completed');
          stepNumber.classList.remove('completed');
        } else {
          stepElement.classList.remove('active', 'completed');
          stepNumber.classList.remove('active', 'completed');
        }
      });
      
      // Update progress bar
      progressBar.style.width = `${(step - 1) * 50}%`;
    }
    
    // Toggle Sandbox Mode
    function toggleSandboxMode(active) {
      sandboxMode = active;
      
      if (active) {
        workspaceContainer.classList.add('sandbox-mode');
        workspaceHeader.classList.add('sandbox-mode');
        sandboxIndicator.classList.add('active');
      } else {
        workspaceContainer.classList.remove('sandbox-mode');
        workspaceHeader.classList.remove('sandbox-mode');
        sandboxIndicator.classList.remove('active');
      }
    }
    
    // Generate AI Thinking Visualization
    function generateThinkingVisualization() {
      aiThinkingVisualization.innerHTML = '';
      
      // Create nodes
      for (let i = 0; i < 20; i++) {
        const node = document.createElement('div');
        node.className = 'thinking-node';
        
        const x = 10 + Math.random() * 80;
        const y = 10 + Math.random() * 80;
        
        node.style.left = `${x}%`;
        node.style.top = `${y}%`;
        
        const animationDelay = Math.random() * 3;
        node.style.animation = `thinking-node-pulse 2s ${animationDelay}s infinite alternate`;
        
        aiThinkingVisualization.appendChild(node);
      }
      
      // Create connections
      const nodes = aiThinkingVisualization.querySelectorAll('.thinking-node');
      
      for (let i = 0; i < nodes.length; i++) {
        for (let j = i + 1; j < nodes.length; j++) {
          if (Math.random() > 0.85) {
            const node1 = nodes[i];
            const node2 = nodes[j];
            
            const rect1 = node1.getBoundingClientRect();
            const rect2 = node2.getBoundingClientRect();
            
            const x1 = parseFloat(node1.style.left);
            const y1 = parseFloat(node1.style.top);
            const x2 = parseFloat(node2.style.left);
            const y2 = parseFloat(node2.style.top);
            
            const dx = x2 - x1;
            const dy = y2 - y1;
            const distance = Math.sqrt(dx * dx + dy * dy);
            const angle = Math.atan2(dy, dx) * 180 / Math.PI;
            
            if (distance < 30) {
              const connection = document.createElement('div');
              connection.className = 'thinking-connection';
              connection.style.left = `${x1}%`;
              connection.style.top = `${y1}%`;
              connection.style.width = `${distance}%`;
              connection.style.transform = `rotate(${angle}deg)`;
              
              const animationDelay = Math.random() * 2;
              connection.style.animation = `thinking-connection-pulse 3s ${animationDelay}s infinite alternate`;
              
              aiThinkingVisualization.appendChild(connection);
            }
          }
        }
      }
      
      // Add CSS animations
      const style = document.createElement('style');
      style.textContent = `
        @keyframes thinking-node-pulse {
          0%, 100% {
            opacity: 0.7;
            transform: scale(1);
          }
          50% {
            opacity: 1;
            transform: scale(1.3);
          }
        }
        
       @keyframes thinking-connection-pulse {
          0%, 100% {
            opacity: 0.3;
          }
          50% {
            opacity: 0.6;
          }
        }
      `;
      document.head.appendChild(style);
      
      aiThinkingVisualization.classList.add('active');
    }
    
    // Move Spotlight Effect
    function moveSpotlight(targetElement) {
      const rect = targetElement.getBoundingClientRect();
      const containerRect = workspaceContainer.getBoundingClientRect();
      
      const x = rect.left - containerRect.left + rect.width / 2;
      const y = rect.top - containerRect.top + rect.height / 2;
      
      spotlight.style.left = `${x}px`;
      spotlight.style.top = `${y}px`;
      
      spotlightContainer.classList.add('active');
      
      return { x, y };
    }
    
    // Generate Light Rays Effect
    function generateLightRays(targetElement) {
      lightRays.innerHTML = '';
      
      const rect = targetElement.getBoundingClientRect();
      const containerRect = workspaceContainer.getBoundingClientRect();
      
      const centerX = rect.left - containerRect.left + rect.width / 2;
      const centerY = rect.top - containerRect.top + rect.height / 2;
      
      const rayCount = 5;
      const rayWidth = 80;
      const rayHeight = 3;
      
      for (let i = 0; i < rayCount; i++) {
        const angle = (i * 360 / rayCount) + (Math.random() * 20);
        const length = rect.width * 1.5 + (Math.random() * 100);
        
        const ray = document.createElement('div');
        ray.className = 'light-ray';
        ray.style.width = `${length}px`;
        ray.style.height = `${rayHeight}px`;
        ray.style.left = `${centerX}px`;
        ray.style.top = `${centerY}px`;
        ray.style.transform = `translate(-50%, -50%) rotate(${angle}deg)`;
        
        const animationDelay = i * 0.2;
        ray.style.animation = `light-ray-pulse 2s ${animationDelay}s infinite alternate ease-in-out`;
        
        lightRays.appendChild(ray);
      }
      
      // Add CSS animation
      const style = document.createElement('style');
      style.textContent = `
        @keyframes light-ray-pulse {
          0%, 100% {
            opacity: 0.1;
            transform: translate(-50%, -50%) rotate(${Math.random() * 360}deg) scaleX(0.8);
          }
          50% {
            opacity: 0.3;
            transform: translate(-50%, -50%) rotate(${Math.random() * 360 + 10}deg) scaleX(1);
          }
        }
      `;
      document.head.appendChild(style);
      
      lightRays.classList.add('active');
    }
    
    // Show Question Tooltip
    function showQuestionTooltip(targetElement, content) {
      const rect = targetElement.getBoundingClientRect();
      const containerRect = workspaceContainer.getBoundingClientRect();
      
      questionTooltip.style.left = `${rect.left - containerRect.left + rect.width / 2}px`;
      questionTooltip.style.top = `${rect.top - containerRect.top - 10}px`;
      questionTooltip.style.transform = 'translate(-50%, -100%)';
      
      if (content) {
        questionTooltip.querySelector('.question-content').textContent = content;
      }
      
      questionTooltip.classList.add('active');
    }
    
    // Hide Question Tooltip
    closeQuestionBtn.addEventListener('click', () => {
      questionTooltip.classList.remove('active');
    });
    
    // Initialize Before/After Slider
    function initializeSlider(targetId, title = 'Comparing Current vs. Enhanced Version') {
      sliderTitle.textContent = title;
      sliderBefore.innerHTML = '';
      sliderAfter.innerHTML = '';
      
      // Reset slider position
      sliderAfter.style.width = '50%';
      sliderHandle.style.left = '50%';
      initialSliderLeft = 50;
      
      // Get target element
      const targetElement = document.getElementById(targetId);
      if (!targetElement) return;
      
      // Based on targetId, create specific diff content
      if (targetId === 'conversionMetric') {
        // Current version
        const currentContent = document.createElement('div');
        currentContent.className = 'metric-card';
        currentContent.innerHTML = `
          <div class="metric-value">3.2%</div>
          <div class="metric-label">Average conversion rate</div>
        `;
        sliderBefore.appendChild(currentContent);
        
        // Enhanced version
        const enhancedContent = document.createElement('div');
        enhancedContent.className = 'metric-card';
        enhancedContent.innerHTML = `
          <div class="metric-value" style="color: var(--status-modified);">4.8%</div>
          <div class="metric-label">New user conversion rate</div>
        `;
        sliderAfter.appendChild(enhancedContent);
      } else if (targetId === 'revenueChart') {
        // Current version
        const currentChart = document.createElement('div');
        currentChart.className = 'chart-container';
        currentChart.innerHTML = `
          <div class="chart-bars">
            <div class="chart-bar" style="height: 60%" data-value="$15K"></div>
            <div class="chart-bar" style="height: 75%" data-value="$19K"></div>
            <div class="chart-bar" style="height: 42%" data-value="$10K"></div>
            <div class="chart-bar" style="height: 65%" data-value="$16K"></div>
            <div class="chart-bar" style="height: 65%" data-value="$16K"></div>
          </div>
        `;
        sliderBefore.appendChild(currentChart);
        
        // Enhanced version
        const enhancedChart = document.createElement('div');
        enhancedChart.className = 'chart-container';
        enhancedChart.innerHTML = `
          <div class="chart-bars">
            <div class="chart-bar" style="height: 60%" data-value="$15K"></div>
            <div class="chart-bar" style="height: 75%" data-value="$19K"></div>
            <div class="chart-bar" style="height: 42%" data-value="$10K"></div>
            <div class="chart-bar" style="height: 90%; background: var(--status-modified);" data-value="$23K"></div>
            <div class="chart-bar" style="height: 65%" data-value="$16K"></div>
            <div class="chart-bar" style="height: 85%; background: var(--status-added);" data-value="$22K"></div>
          </div>
        `;
        sliderAfter.appendChild(enhancedChart);
      } else if (targetId === 'marketingTable') {
        // Current version
        const currentTable = document.createElement('div');
        currentTable.className = 'table-container';
        currentTable.innerHTML = `
          <table class="data-table">
            <thead>
              <tr>
                <th>Channel</th>
                <th>Users</th>
                <th>Conv. %</th>
                <th>CPA</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Organic Search</td>
                <td>8,421</td>
                <td>4.7%</td>
                <td>$12.40</td>
              </tr>
              <tr>
                <td>Paid Search</td>
                <td>5,283</td>
                <td>3.2%</td>
                <td>$21.75</td>
              </tr>
              <tr>
                <td>Social Media</td>
                <td>5,193</td>
                <td>2.5%</td>
                <td>$22.30</td>
              </tr>
              <tr>
                <td>Email</td>
                <td>1,725</td>
                <td>2.1%</td>
                <td>$14.80</td>
              </tr>
            </tbody>
          </table>
        `;
        sliderBefore.appendChild(currentTable);
        
        // Enhanced version
        const enhancedTable = document.createElement('div');
        enhancedTable.className = 'table-container';
        enhancedTable.innerHTML = `
          <table class="data-table">
            <thead>
              <tr>
                <th>Channel</th>
                <th>Users</th>
                <th>Conv. %</th>
                <th>CPA</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Organic Search</td>
                <td>8,421</td>
                <td>4.7%</td>
                <td>$12.40</td>
              </tr>
              <tr style="background: var(--status-modified-bg);">
                <td>Paid Search</td>
                <td>6,382</td>
                <td>3.8%</td>
                <td>$18.25</td>
              </tr>
              <tr style="background: var(--status-added-bg);">
                <td>Referral Partners</td>
                <td>2,865</td>
                <td>5.2%</td>
                <td>$9.15</td>
              </tr>
              <tr>
                <td>Social Media</td>
                <td>5,193</td>
                <td>2.5%</td>
                <td>$22.30</td>
              </tr>
              <tr style="background: var(--status-removed-bg); text-decoration: line-through; opacity: 0.7;">
                <td>Email</td>
                <td>1,725</td>
                <td>2.1%</td>
                <td>$14.80</td>
              </tr>
            </tbody>
          </table>
        `;
        sliderAfter.appendChild(enhancedTable);
      } else if (targetId === 'customerSegment') {
        // Current version (empty)
        const currentContent = document.createElement('div');
        currentContent.className = 'chart-container';
        currentContent.innerHTML = `
          <div style="text-align: center; color: #999; padding: 2rem;">
            No data visualization exists for customer segments.
          </div>
        `;
        sliderBefore.appendChild(currentContent);
        
        // Enhanced version
        const enhancedContent = document.createElement('div');
        enhancedContent.className = 'chart-container';
        enhancedContent.innerHTML = `
          <div class="chart-bars">
            <div class="chart-bar" style="height: 85%; background: var(--status-added);" data-value="SMB"></div>
            <div class="chart-bar" style="height: 60%; background: var(--status-added);" data-value="Mid"></div>
            <div class="chart-bar" style="height: 40%; background: var(--status-added);" data-value="Ent"></div>
          </div>
        `;
        sliderAfter.appendChild(enhancedContent);
      }
      
      diffSlider.classList.add('active');
    }
    
    // Handle Slider Drag
    sliderHandle.addEventListener('mousedown', (e) => {
      isDragging = true;
      startPositionX = e.clientX;
      sliderHandle.style.cursor = 'grabbing';
    });
    
    document.addEventListener('mousemove', (e) => {
      if (!isDragging) return;
      
      const sliderRect = document.getElementById('beforeAfterSlider').getBoundingClientRect();
      const deltaX = e.clientX - startPositionX;
      let newLeft = initialSliderLeft + (deltaX / sliderRect.width) * 100;
      
      // Constrain to slider boundaries
      newLeft = Math.max(0, Math.min(100, newLeft));
      
      // Update slider position
      sliderAfter.style.width = `${newLeft}%`;
      sliderHandle.style.left = `${newLeft}%`;
    });
    
    document.addEventListener('mouseup', () => {
      if (isDragging) {
        isDragging = false;
        sliderHandle.style.cursor = 'ew-resize';
        initialSliderLeft = parseFloat(sliderAfter.style.width);
      }
    });
    
    // Close Slider
    function closeSlider() {
      diffSlider.classList.remove('active');
    }
    
    closeSliderBtn.addEventListener('click', closeSlider);
    cancelSliderBtn.addEventListener('click', closeSlider);
    
    // Start Commit Process
    function startCommitProcess() {
      diffSlider.classList.remove('active');
      changePanel.classList.remove('active');
      
      // Reset progress and status
      commitProgressBar.style.width = '0%';
      commitStatus.textContent = 'Initializing changes...';
      appliedChanges.innerHTML = '';
      appliedChanges.classList.remove('active');
      finishCommitBtn.style.display = 'none';
      
      // Show commit process
      commitProcess.classList.add('active');
      
      // Simulate progress
      setTimeout(() => {
        commitProgressBar.style.width = '30%';
        commitStatus.textContent = 'Preparing dashboard updates...';
        
        setTimeout(() => {
          commitProgressBar.style.width = '60%';
          commitStatus.textContent = 'Applying changes to visualizations...';
          
          setTimeout(() => {
            commitProgressBar.style.width = '100%';
            commitStatus.textContent = 'Changes successfully applied!';
            
            // Show applied changes
            setTimeout(() => {
              appliedChanges.classList.add('active');
              
              // Add applied items with animation
              const changes = [
                { name: 'Conversion Rate Update', type: 'modified' },
                { name: 'Revenue Growth Visualization', type: 'modified' },
                { name: 'Marketing Channel Optimization', type: 'modified' },
                { name: 'Customer Segments Visualization', type: 'added' }
              ];
              
              changes.forEach((change, index) => {
                setTimeout(() => {
                  const item = document.createElement('div');
                  item.className = 'applied-item';
                  item.innerHTML = `
                    <div class="applied-icon">âœ“</div>
                    <div class="applied-text">${change.name}</div>
                  `;
                  
                  appliedChanges.appendChild(item);
                  
                  // Activate with animation
                  setTimeout(() => {
                    item.classList.add('active');
                  }, 100);
                }, index * 500);
              });
              
              // Show finish button after all changes are shown
              setTimeout(() => {
                finishCommitBtn.style.display = 'block';
              }, changes.length * 500 + 500);
            }, 1000);
          }, 1500);
        }, 1500);
      }, 1000);
    }
    
    // Finish Commit Process
    finishCommitBtn.addEventListener('click', () => {
      commitProcess.classList.remove('active');
      toggleSandboxMode(false);
      
      // Apply changes to actual dashboard (in a real application)
      updateDashboardWithChanges();
    });
    
    // Update Dashboard with Changes
    function updateDashboardWithChanges() {
      // Conversion Rate Update
      const conversionMetric = document.getElementById('conversionMetric');
      if (conversionMetric) {
        const metricValue = conversionMetric.querySelector('.metric-value');
        const metricLabel = conversionMetric.querySelector('.metric-label');
        
        if (metricValue && metricLabel) {
          metricValue.textContent = '4.8%';
          metricLabel.textContent = 'New user conversion rate';
        }
      }
      
      // Revenue Growth Visualization
      const revenueChart = document.getElementById('revenueChart');
      if (revenueChart) {
        const chartBars = revenueChart.querySelector('.chart-bars');
        
        if (chartBars) {
          chartBars.innerHTML = `
            <div class="chart-bar" style="height: 60%" data-value="$15K"></div>
            <div class="chart-bar" style="height: 75%" data-value="$19K"></div>
            <div class="chart-bar" style="height: 42%" data-value="$10K"></div>
            <div class="chart-bar" style="height: 90%" data-value="$23K"></div>
            <div class="chart-bar" style="height: 65%" data-value="$16K"></div>
            <div class="chart-bar" style="height: 85%" data-value="$22K"></div>
          `;
        }
      }
      
      // Marketing Channels Update
      const marketingTable = document.getElementById('marketingTable');
      if (marketingTable) {
        const tableBody = marketingTable.querySelector('tbody');
        
        if (tableBody) {
          tableBody.innerHTML = `
            <tr>
              <td>Organic Search</td>
              <td>8,421</td>
              <td>4.7%</td>
              <td>$12.40</td>
            </tr>
            <tr>
              <td>Paid Search</td>
              <td>6,382</td>
              <td>3.8%</td>
              <td>$18.25</td>
            </tr>
            <tr>
              <td>Referral Partners</td>
              <td>2,865</td>
              <td>5.2%</td>
              <td>$9.15</td>
            </tr>
            <tr>
              <td>Social Media</td>
              <td>5,193</td>
              <td>2.5%</td>
              <td>$22.30</td>
            </tr>
          `;
        }
      }
      
      // Add Customer Segments Card
      const dashboard = document.querySelector('.dashboard-grid');
      if (dashboard) {
        const segmentCard = document.createElement('div');
        segmentCard.className = 'grid-card';
        segmentCard.id = 'customerSegment';
        segmentCard.innerHTML = `
          <div class="grid-card-header">
            <div class="grid-card-title">
              <div class="grid-card-icon">ðŸ‘¥</div>
              <span>Customer Segments</span>
            </div>
          </div>
          <div class="grid-card-body">
            <div class="chart-container">
              <div class="chart-bars">
                <div class="chart-bar" style="height: 85%" data-value="SMB"></div>
                <div class="chart-bar" style="height: 60%" data-value="Mid"></div>
                <div class="chart-bar" style="height: 40%" data-value="Ent"></div>
              </div>
            </div>
          </div>
          <div class="grid-card-footer">
            <span>By revenue contribution</span>
          </div>
        `;
        
        // Animate the new card entrance
        segmentCard.style.opacity = '0';
        segmentCard.style.transform = 'translateY(20px)';
        
        dashboard.appendChild(segmentCard);
        
        setTimeout(() => {
          segmentCard.style.opacity = '1';
          segmentCard.style.transform = 'translateY(0)';
          segmentCard.style.transition = 'all 0.5s var(--easing-spring)';
        }, 100);
      }
    }
    
    // Setup Change Card Actions
    document.querySelectorAll('.change-card').forEach(card => {
      const previewButton = card.querySelector('.action-preview');
      
      if (previewButton) {
        previewButton.addEventListener('click', () => {
          const targetId = previewButton.getAttribute('data-target');
          const cardTitle = card.querySelector('.change-title').textContent.trim();
          
          initializeSlider(targetId, `Preview: ${cardTitle}`);
        });
      }
      
      // Make entire card selectable
      card.addEventListener('click', (e) => {
        // Don't select if clicking on a button
        if (e.target.closest('.change-action')) return;
        
        card.classList.toggle('selected');
        const targetId = card.getAttribute('data-target');
        
        if (card.classList.contains('selected')) {
          selectedChanges.add(targetId);
        } else {
          selectedChanges.delete(targetId);
        }
        
        // Update Review Changes button state
        reviewChangesBtn.disabled = selectedChanges.size === 0;
      });
    });
    
    // Toggle Change Panel
    toggleChangesBtn.addEventListener('click', () => {
      changePanel.classList.toggle('active');
      
      if (changePanel.classList.contains('active')) {
        // Enter sandbox mode when panel is open
        toggleSandboxMode(true);
        updateTimeline(1);
      } else {
        // Exit sandbox mode when panel is closed
        toggleSandboxMode(false);
      }
    });
    
    closeChangesBtn.addEventListener('click', () => {
      changePanel.classList.remove('active');
      toggleSandboxMode(false);
    });
    
    // Navigate to Preview Step
    reviewChangesBtn.addEventListener('click', () => {
      // Update timeline
      currentStep = 2;
      updateTimeline(currentStep);
      
      // Update panel content
      const changesList = document.querySelector('.changes-list');
      const conversationFlow = document.querySelector('.conversation-flow');
      
      // Add preview message
      const previewMessage = document.createElement('div');
      previewMessage.className = 'ai-message-container';
      previewMessage.style.animation = 'message-appear 0.5s var(--easing-spring) forwards';
      previewMessage.innerHTML = `
        <div class="ai-message">
          <div class="ai-avatar">
            <div class="avatar-icon">K</div>
            <div class="avatar-name">Kickoff AI</div>
          </div>
          <div class="message-body">
            <p>Great! Let's preview these changes. I'm going to apply them in a safe sandbox environment so you can see exactly how they'll look before you make a final decision.</p>
            <p>Take your time to review each change. You can always ask me why I've suggested a particular change or how it might benefit your dashboard.</p>
          </div>
        </div>
      `;
      
      conversationFlow.appendChild(previewMessage);
      
      // Update panel footer
      document.querySelector('.panel-actions').innerHTML = `
        <button class="panel-btn panel-btn-primary" id="applyChangesBtn">Apply Selected Changes</button>
        <button class="panel-btn panel-btn-secondary" id="backToReviewBtn">Go Back</button>
      `;
      
      // Setup new buttons
      document.getElementById('applyChangesBtn').addEventListener('click', () => {
        currentStep = 3;
        updateTimeline(currentStep);
        startCommitProcess();
      });
      
      document.getElementById('backToReviewBtn').addEventListener('click', () => {
        currentStep = 1;
        updateTimeline(currentStep);
        previewMessage.remove();
        
        // Reset panel footer
        document.querySelector('.panel-actions').innerHTML = `
          <button class="panel-btn panel-btn-primary" id="reviewChangesBtn">Preview Selected Changes</button>
          <button class="panel-btn panel-btn-secondary" id="closeChangesBtn">Cancel</button>
        `;
        
        // Re-attach event listeners
        document.getElementById('reviewChangesBtn').addEventListener('click', () => {
          currentStep = 2;
          updateTimeline(currentStep);
        });
        
        document.getElementById('closeChangesBtn').addEventListener('click', () => {
          changePanel.classList.remove('active');
          toggleSandboxMode(false);
        });
      });
      
      // Apply sandbox changes
      applyPreviewChanges();
    });
    
    // Apply Preview Changes
    function applyPreviewChanges() {
      // Add staged classes to selected elements
      selectedChanges.forEach(targetId => {
        const element = document.getElementById(targetId);
        if (element) {
          const card = document.querySelector(`.change-card[data-target="${targetId}"]`);
          const changeType = card.classList.contains('modified') ? 'modified' : 
                            card.classList.contains('added') ? 'added' : 
                            card.classList.contains('removed') ? 'removed' : '';
          
          element.classList.add('staged', changeType);
          
          // Create spotlight effect
          moveSpotlight(element);
          
          // Create light rays effect
          generateLightRays(element);
        }
      });
    }
    
    // AI Nucleus Interaction
    aiNucleus.addEventListener('click', () => {
      // Show thinking visualization
      aiNucleus.classList.add('thinking');
      aiThinkingVisualization.innerHTML = '';
      generateThinkingVisualization();
      
      // After thinking, show change panel
      setTimeout(() => {
        aiNucleus.classList.remove('thinking');
        aiThinkingVisualization.classList.remove('active');
        changePanel.classList.add('active');
        toggleSandboxMode(true);
        updateTimeline(1);
      }, 3000);
    });
    
    // Demo Control Buttons
    startAiAnalysisBtn.addEventListener('click', () => {
      // Show AI thinking visualization
      aiNucleus.classList.add('thinking');
      generateThinkingVisualization();
      
      // Scan elements one by one
      const elements = document.querySelectorAll('.grid-card');
      let currentIndex = 0;
      
      function scanNextElement() {
        if (currentIndex < elements.length) {
          const element = elements[currentIndex];
          moveSpotlight(element);
          
          setTimeout(() => {
            currentIndex++;
            scanNextElement();
          }, 800);
        } else {
          // Finished scanning
          setTimeout(() => {
            aiNucleus.classList.remove('thinking');
            aiThinkingVisualization.classList.remove('active');
            spotlightContainer.classList.remove('active');
            
            // Show change panel
            setTimeout(() => {
              changePanel.classList.add('active');
              toggleSandboxMode(true);
              updateTimeline(1);
            }, 500);
          }, 800);
        }
      }
      
      // Start the scanning process
      setTimeout(scanNextElement, 1500);
    });
    
    showChangesPanelBtn.addEventListener('click', () => {
      changePanel.classList.add('active');
      toggleSandboxMode(true);
      updateTimeline(1);
    });
    
    showSliderBtn.addEventListener('click', () => {
      initializeSlider('marketingTable', 'Preview: Marketing Channel Optimization');
    });
    
    showCommitBtn.addEventListener('click', () => {
      startCommitProcess();
    });
    
    // Initialize the page
    updateTimeline(1);
    
    // For demonstration, add question functionality to a specific component
    const emailRow = document.querySelector('.data-table tr:last-child');
    if (emailRow) {
      emailRow.style.cursor = 'pointer';
      
      emailRow.addEventListener('click', (e) => {
        showQuestionTooltip(emailRow, "This channel has the lowest conversion rate (2.1%) and highest cost per acquisition, making it less efficient than your other channels.");
      });
    }
    
    // Accept Change from Slider
    acceptChangeBtn.addEventListener('click', () => {
      closeSlider();
      
      // Update the timeline in the panel
      if (currentStep < 2) {
        currentStep = 2;
        updateTimeline(currentStep);
      }
      
      // Show success message
      const conversationFlow = document.querySelector('.conversation-flow');
      const acceptMessage = document.createElement('div');
      acceptMessage.className = 'ai-message-container';
      acceptMessage.style.animation = 'message-appear 0.5s var(--easing-spring) forwards';
      acceptMessage.innerHTML = `
        <div class="ai-message">
          <div class="ai-avatar">
            <div class="avatar-icon">K</div>
            <div class="avatar-name">Kickoff AI</div>
          </div>
          <div class="message-body">
            <p>Great choice! This change will help you focus on your most effective marketing channels. Would you like to see the rest of the changes now?</p>
          </div>
        </div>
      `;
      
      conversationFlow.appendChild(acceptMessage);
    });
  </script>
</body>
</html>